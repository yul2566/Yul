<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>영단어 퀴즈 (74K 단어)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; text-align: center; }
    .question { font-size: 24px; margin: 20px 0; }
    .choices button { display: block; width: 100%; margin: 5px 0; padding: 10px; font-size: 18px; cursor: pointer; }
    #scoreBoard { margin-top: 20px; font-size: 20px; }
    button#start { font-size: 18px; padding: 10px 20px; margin-top: 20px; }
  </style>
</head>
<body>

  <h1>영단어 퀴즈 (74,550단어 이상)</h1>
  <div id="quizArea">
    <div id="question" class="question"></div>
    <div id="choices" class="choices"></div>
    <div id="scoreBoard"></div>
  </div>
  <button id="start">게임 시작</button>

  <script>
    let words = [];
    let currentQ = 0, correctCount = 0, totalQ = 10;
    const modes = ['word-to-word', 'random'];

    async function loadWords() {
      const res = await fetch('wordlist.json');
      words = await res.json();
    }

    function getRandomElements(arr, n) {
      return Array.from({ length: n }, () => arr[Math.floor(Math.random() * arr.length)]);
    }

    function nextQuestion() {
      if (currentQ >= totalQ) {
        document.getElementById('question').innerText = `퀴즈 종료! 결과: ${correctCount} / ${totalQ}`;
        document.getElementById('choices').innerHTML = '';
        return;
      }

      const mode = modes[Math.floor(Math.random() * modes.length)];
      const correct = words[Math.floor(Math.random() * words.length)];
      const distractors = getRandomElements(words.filter(w => w !== correct), 3);
      const choices = [...distractors, correct].sort(() => 0.5 - Math.random());

      const promptText = mode === 'word-to-word'
        ? `단어 "${correct}" 의 동의어를 고르세요:` // 사실 영어 단어만 있어서 문맥상 의미는 동일 단어 선택
        : `랜덤 단어 선택: "${correct}"`;

      document.getElementById('question').innerText = `문제 ${currentQ + 1}: ${promptText}`;
      const choicesDiv = document.getElementById('choices');
      choicesDiv.innerHTML = '';

      choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.innerText = choice;
        btn.onclick = () => {
          if (choice === correct) correctCount++;
          currentQ++;
          document.getElementById('scoreBoard').innerText = `정답: ${correctCount} / ${currentQ}`;
          nextQuestion();
        };
        choicesDiv.appendChild(btn);
      });
    }

    document.getElementById('start').onclick = async () => {
      await loadWords();
      currentQ = 0; correctCount = 0;
      document.getElementById('start').style.display = 'none';
      document.getElementById('scoreBoard').innerText = '';
      nextQuestion();
    };
  </script>

</body>
</html>
