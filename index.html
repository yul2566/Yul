<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ«ì ë§ì¶”ê¸° ê²Œì„ - Easy / Hard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
      background-color: #f0f8ff;
      transition: background-color 0.3s;
    }

    button {
      padding: 10px 20px;
      font-size: 18px;
      margin: 10px 5px;
      cursor: pointer;
    }

    #gameArea {
      display: none;
      margin-top: 30px;
    }

    input[type="number"] {
      padding: 10px;
      font-size: 18px;
      width: 100px;
    }

    #result, #info, #score, #timer {
      margin-top: 15px;
      font-size: 20px;
    }

    .success {
      background-color: #d4edda !important;
    }

    .fail {
      background-color: #f8d7da !important;
    }
  </style>
</head>
<body>

  <h1>ìˆ«ì ë§ì¶”ê¸° ê²Œì„</h1>
  <p>ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
  <button onclick="startGame('easy')">Easy</button>
  <button onclick="startGame('hard')">Hard</button>

  <div id="gameArea">
    <p id="rangeInfo"></p>
    <input type="number" id="userInput" />
    <button onclick="checkGuess()">í™•ì¸</button>
    <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>

    <div id="result"></div>
    <div id="info"></div>
    <div id="score"></div>
    <div id="timer"></div>
  </div>

  <script>
    let targetNumber = 0;
    let attempts = 0;
    let maxAttempts = Infinity;
    let maxNumber = 50;
    let currentMode = 'easy';
    let gameOver = false;
    let startTime = 0;
    let timerInterval = null;

    function startGame(mode) {
      currentMode = mode;
      gameOver = false;
      attempts = 0;

      if (mode === 'easy') {
        maxNumber = 50;
        maxAttempts = Infinity;
        document.getElementById("rangeInfo").textContent = "1ë¶€í„° 50 ì‚¬ì´ ìˆ«ìë¥¼ ë§ì¶°ë³´ì„¸ìš”!";
      } else {
        maxNumber = 100;
        maxAttempts = 5;
        document.getElementById("rangeInfo").textContent = "1ë¶€í„° 100 ì‚¬ì´ ìˆ«ìë¥¼ 5ë²ˆ ì•ˆì— ë§ì¶°ë³´ì„¸ìš”!";
      }

      targetNumber = Math.floor(Math.random() * maxNumber) + 1;
      document.getElementById("userInput").value = "";
      document.getElementById("userInput").disabled = false;
      document.getElementById("result").textContent = "";
      document.getElementById("info").textContent = "ì‹œë„ íšŸìˆ˜: 0";
      document.getElementById("score").textContent = "";
      document.getElementById("timer").textContent = "";
      document.body.className = "";
      document.getElementById("gameArea").style.display = "block";
      document.getElementById("userInput").focus();

      // íƒ€ì´ë¨¸ ì‹œì‘
      clearInterval(timerInterval);
      startTime = Date.now();
      timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      const now = Date.now();
      const elapsed = Math.floor((now - startTime) / 1000);
      document.getElementById("timer").textContent = `â±ï¸ ê²½ê³¼ ì‹œê°„: ${elapsed}ì´ˆ`;
    }

    function checkGuess() {
      if (gameOver) return;

      const input = document.getElementById("userInput").value;
      const guess = parseInt(input);

      if (isNaN(guess) || guess < 1 || guess > maxNumber) {
        document.getElementById("result").textContent = `âš ï¸ 1ë¶€í„° ${maxNumber} ì‚¬ì´ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.`;
        return;
      }

      attempts++;
      document.getElementById("info").textContent = `ì‹œë„ íšŸìˆ˜: ${attempts}`;

      if (guess === targetNumber) {
        document.getElementById("result").textContent = `ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!`;
        document.body.className = "success";
        endGame(true);
      } else if (guess < targetNumber) {
        document.getElementById("result").textContent = "ğŸ“‰ ë” í° ìˆ«ìì…ë‹ˆë‹¤.";
      } else {
        document.getElementById("result").textContent = "ğŸ“ˆ ë” ì‘ì€ ìˆ«ìì…ë‹ˆë‹¤.";
      }

      if (currentMode === 'hard' && attempts >= maxAttempts && guess !== targetNumber) {
        document.getElementById("result").textContent = `âŒ ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì •ë‹µì€ ${targetNumber}ì˜€ìŠµë‹ˆë‹¤.`;
        document.body.className = "fail";
        endGame(false);
      }
    }

    function endGame(isCorrect) {
      gameOver = true;
      document.getElementById("userInput").disabled = true;
      clearInterval(timerInterval);

      // ì ìˆ˜ ê³„ì‚°
      let score = 0;
      if (currentMode === 'easy') {
        score = Math.max(0, 100 - (attempts - 1) * 10);
      } else {
        score = isCorrect ? (maxAttempts - attempts + 1) * 20 : 0;
      }

      const timeTaken = Math.floor((Date.now() - startTime) / 1000);
      document.getElementById("score").textContent = `ğŸ§  ì ìˆ˜: ${score}ì `;
      document.getElementById("timer").textContent += ` / ì´ ì‹œê°„: ${timeTaken}ì´ˆ`;
    }

    function restartGame() {
      startGame(currentMode);
    }
  </script>

</body>
</html>
